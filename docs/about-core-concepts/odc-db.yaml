definitions:
  Identity:
    type: integer
    format: int64
    minimum: 1

  Common:
    properties:
      archived:
        type: boolean
      added:
        type: datetime
      added_by:
        type: nvarchar
        maxLength: 255
      updated:
        type: boolean

  Dataset:
    allOf:
      - $ref: '#/definitions/Common'
        properties:
          id:
            $ref: '#/definitions/Identity'
          metadata_type_ref:
            $ref: '#/definitions/Identity'
          dataset_type_ref:
            $ref: '#/definitions/Identity'
          metadata:
            type: jsonb


  Dataset_Location:
    allOf:
      - $ref: '#/definitions/Common'
        properties:
          id:
            $ref: '#/definitions/Identity'
          dataset_ref:
            $ref: '#/definitions/Identity'
          uri_scheme:
            type: nvarchar
          uri_body:
            type: nvarchar

  Dataset_Type:
    allOf:
      - $ref: '#/definitions/Common'
        properties:
          id:
            $ref: '#/definitions/Identity'
          name:
            type: nvarchar
          metadata:
            type: jsonb
          metadata_type_ref:
            $ref: '#/definitions/Identity'
          definition:
            type: jsonb

  Metadata_Type:
    allOf:
      - $ref: '#/definitions/Common'
        properties:
          id:
            $ref: '#/definitions/Identity'
          name:
            type: nvarchar
          definition:
            type: jsonb

tables:
  dataset:
    name: dataset
    description: Table to store dataset information
    columns:
      $ref: '#/definitions/Dataset'
  dataset_location:
    name: dataset_location
    description: Table to store dataset location information
    columns:
      $ref: '#/definitions/Dataset_Location'
  dataset_type:
    name: dataset_type
    description: Table to store product information
    columns:
      $ref: '#/definitions/Dataset_Type'
  metadata_type:
    name: metadata_type
    description: Table to store metadata type information
    columns:
      $ref: '#/definitions/Metadata_Type'

relationships:
  - metadata_type ||--0< dataset_type
  - dataset_type ||--0< dataset
  - dataset ||--0< dataset_location
